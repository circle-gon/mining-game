/* empty css                    */import"./vue.4fa4fb4b.js";import{D as v}from"./break_eternity.js.421d8aa0.js";import{Z as S,l as H,u as at,q as je,C as l,b1 as oe,aa as I,t as C,aC as Dt,w as ae,b2 as Ne,a8 as p,O as Y,ay as rt,ar as ye,aE as f,a0 as y,aK as me,a1 as u,aG as Ye,A as X,_ as O,b6 as R,b8 as _t,bs as un,a7 as V,aq as $e,bu as Ue,bb as gt,T as dn,j as cn,bv as Pt,aL as Ve,$ as T,J as D,G as Q,aN as q,I as se,aH as he,aF as be,z as ue,bn as fn,br as pn,aJ as xt,al as et,H as vn,y as Rt,be as mn}from"./@vue.89e41f87.js";import{i as _n}from"./is-plain-object.906d88e8.js";import{c as Mt}from"./nanoevents.aafb4425.js";import{L as ve}from"./lz-string.895bbeec.js";import{Y as gn}from"./vue-next-select.bfa40944.js";import{D as yn}from"./vuedraggable.368ac9c8.js";import{p as hn}from"./vue-textarea-autosize.35804eaf.js";import{s as bn,u as kn}from"./vue-toastification.e0fd4524.js";import"./sortablejs.35affccd.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const wn="modulepreload",Nn=function(e,t){return new URL(e,t).href},Ot={},Ae=function(t,n,o){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=Nn(i,o),i in Ot)return;Ot[i]=!0;const r=i.endsWith(".css"),a=r?'[rel="stylesheet"]':"";if(!!o)for(let _=s.length-1;_>=0;_--){const m=s[_];if(m.href===i&&(!r||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const d=document.createElement("link");if(d.rel=r?"stylesheet":wn,r||(d.as="script",d.crossOrigin=""),d.href=i,document.head.appendChild(d),r)return new Promise((_,m)=>{d.addEventListener("load",_),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t())},$n="./projInfo-schema.json",Sn="Profectus",Cn="A project made in Profectus",Tn="guchyah",Pn="",Rn="",On="",In="0.0",Vn="Initial Commit",Dn=!0,xn=!1,Mn=2,Ln=!0,Bn=null,En="",Un=["main"],An=3600,Fn=1,Gn=!0,Hn="base64",x={$schema:$n,title:Sn,description:Cn,id:Tn,author:Pn,discordName:Rn,discordLink:On,versionNumber:In,versionTitle:Vn,allowGoBack:Dn,defaultShowSmall:xn,defaultDecimalsShown:Mn,useHeader:Ln,banner:Bn,logo:En,initialTabs:Un,maxTickLength:An,offlineLimit:Fn,enablePausing:Gn,exportEncoding:Hn},zn=new v(1);function Be(e,t,n=!0){let o=v.log10(e).floor(),s=v.div(e,v.pow(10,o));s.toStringWithDecimalPlaces(t)==="10"&&(s=zn,o=o.add(1));const i=o.gte(1e9)?ne(o,Math.max(Math.max(t,3),x.defaultDecimalsShown)):o.gte(1e4)?tt(o,0):o.toStringWithDecimalPlaces(0);return n?s.toStringWithDecimalPlaces(t)+"e"+i:"e"+i}function tt(e,t){if(e==null)return"NaN";if(e=new v(e),e.mag<.001)return 0 .toFixed(t);const o=e.toStringWithDecimalPlaces(t).split(".");return o[0]=o[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),o.length==1?o[0]:o[0]+"."+o[1]}function Lt(e,t){return e==null?"NaN":(e=new v(e),e.mag<1e-4?0 .toFixed(t):(e.mag<.1&&t!==0&&(t=Math.max(Math.max(t,e.log10().negate().ceil().toNumber()),x.defaultDecimalsShown)),e.toStringWithDecimalPlaces(t)))}const jn=new v("eeee1000"),Wn=new v("e100000"),It=new v("e1000"),Bt=new v(1e9),qn=new v(1e6),Kn=new v(1e3),Jn=new v(.98),Yn=new v(.001),Et=new v(0);function ne(e,t,n){if(t==null&&(t=x.defaultDecimalsShown),n=n!=null?n:x.defaultShowSmall,e=new v(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag))return"NaN";if(e.sign<0)return"-"+ne(e.neg(),t);if(e.mag===Number.POSITIVE_INFINITY)return"Infinity";if(e.gte(jn)){const o=e.slog();return o.gte(qn)?"F"+ne(o.floor()):v.pow(10,o.sub(o.floor())).toStringWithDecimalPlaces(3)+"F"+tt(o.floor(),0)}else{if(e.gte(Wn))return Be(e,0,!1);if(e.gte(It))return Be(e,0);if(e.gte(Bt))return Be(e,t);if(e.gte(Kn))return tt(e,0);if(e.gte(Yn)||!n)return Lt(e,t);if(e.eq(Et))return 0 .toFixed(t)}return e=At(e),e.lt(It)?Be(e,t).replace(/([^(?:e|F)]*)$/,"-$1"):ne(e,t)+"\u207B\xB9"}function te(e){return e=new v(e),e.sign<0?"-"+te(e.neg()):e.gte(Bt)||e.lte(Jn)&&!e.eq(Et)?ne(e):ne(e,0)}function Ut(e){return v.lt(e,0)?"-"+Ut(v.neg(e)):v.gt(e,2**51)?ne(v.div(e,31536e3))+"y":(e=new v(e).toNumber(),e<60?ne(e)+"s":e<3600?te(Math.floor(e/60))+"m "+ne(e%60)+"s":e<86400?te(Math.floor(e/3600))+"h "+te(Math.floor(e/60)%60)+"m "+te(e%60)+"s":e<31536e3?te(Math.floor(e/84600)%365)+"d "+te(Math.floor(e/3600)%24)+"h "+te(Math.floor(e/60)%60)+"m":te(Math.floor(e/31536e3))+"y "+te(Math.floor(e/84600)%365)+"d "+te(Math.floor(e/3600)%24)+"h")}function Zn(e,t,n){e=new v(e);let o=e.toStringWithDecimalPlaces(t);return new v(o).gte(n)&&(o=v.sub(n,Math.pow(.1,t)).toStringWithDecimalPlaces(t)),o}function Xn(e,t){return ne(e,t,!0)}function At(e){let t=v.log10(e).ceil();const n=v.div(e,v.pow(10,t));return t=t.neg(),e=new v(10).pow(t).times(n),e}const Qn=Object.freeze(Object.defineProperty({__proto__:null,default:v,exponentialFormat:Be,commaFormat:tt,regularFormat:Lt,format:ne,formatWhole:te,formatTime:Ut,toPlaces:Zn,formatSmall:Xn,invertOOM:At},Symbol.toStringTag,{value:"Module"})),{exponentialFormat:eo,commaFormat:to,regularFormat:no,format:de,formatWhole:De,formatTime:ut,toPlaces:oo,formatSmall:so,invertOOM:lo}=Qn;window.Decimal=v;window.exponentialFormat=eo;window.commaFormat=to;window.regularFormat=no;window.format=de;window.formatWhole=De;window.formatTime=ut;window.toPlaces=oo;window.formatSmall=so;window.invertOOM=lo;function io(e){let t=e.replace(/([A-Z])/g," $1");return t=t.charAt(0).toUpperCase()+t.slice(1),t}function vt(e){return typeof e=="function"}var G=(e=>(e.Up="Up",e.Down="Down",e.Left="Left",e.Right="Right",e.Default="Up",e))(G||{});const Fe=Symbol("DoNotCache");function P(e,t){const n=e[t];vt(n)&&n.length===0&&!n[Fe]?e[t]=S(n.bind(e)):vt(n)&&(e[t]=n.bind(e),e[t][Fe]=!0)}function mt(e){return vt(e)&&!e[Fe]&&(e=S(e)),e}const _e=Symbol("Component"),ge=Symbol("GatherProps");let ao=0;function dt(e="feature-"){return e+ao++}var xe=(e=>(e[e.Visible=0]="Visible",e[e.Hidden=1]="Hidden",e[e.None=2]="None",e))(xe||{});function W(e){return e[Fe]=!0,e}function K(e,t,n){e[t]===void 0&&n!=null&&(e[t]=n)}function Ft(e,...t){const n=[],o=s=>{Object.keys(s).forEach(i=>{const r=s[i];r&&typeof r=="object"&&(t.includes(r.type)?n.push(r):!(r instanceof v)&&!H(r)&&o(r))})};return o(e),n}const ke={variables:{"--foreground":"#dfdfdf","--background":"#0f0f0f","--feature-foreground":"#0f0f0f","--tooltip-background":"rgba(0, 0, 0, 0.75)","--raised-background":"#0f0f0f","--points":"#ffffff","--locked":"#bf8f8f","--highlighted":"#333","--bought":"#77bf5f","--danger":"rgb(220, 53, 69)","--link":"#02f2f2","--outline":"#dfdfdf","--accent1":"#627a82","--accent2":"#658262","--accent3":"#7c6282","--border-radius":"15px","--modal-border":"solid 2px var(--color)","--feature-margin":"0px"},floatingTabs:!0,mergeAdjacent:!0,showPin:!0};var yt=(e=>(e.Classic="classic",e.Paper="paper",e.Nordic="nordic",e.Aqua="aqua",e))(yt||{});const ht={classic:ke,paper:{...ke,variables:{...ke.variables,"--background":"#2a323d","--feature-foreground":"#000","--raised-background":"#333c4a","--locked":"#3a3e45","--bought":"#5C8A58","--outline":"#333c4a","--border-radius":"4px","--modal-border":"","--feature-margin":"5px"},floatingTabs:!1},nordic:{...ke,variables:{...ke.variables,"--foreground":"#D8DEE9","--background":"#2E3440","--feature-foreground":"#000","--raised-background":"#3B4252","--points":"#E5E9F0","--locked":"#4c566a","--highlighted":"#434c5e","--bought":"#8FBCBB","--danger":"#D08770","--link":"#88C0D0","--outline":"#3B4252","--accent1":"#B48EAD","--accent2":"#A3BE8C","--accent3":"#EBCB8B","--border-radius":"4px","--modal-border":"solid 2px #3B4252","--feature-margin":"5px"},floatingTabs:!1},aqua:{...ke,variables:{...ke.variables,"--foreground":"#bfdfff","--background":"#001f3f","--tooltip-background":"rgba(0, 15, 31, 0.75)","--raised-background":"#001f3f","--points":"#dfefff","--locked":"#c4a7b3","--outline":"#bfdfff"}}},A=Symbol("ProxyState"),Pe=Symbol("ProxyPath");function Se(e,t={}){const n=t;let o=!1;function s(){return o||(Object.assign(n,e(n)),o=!0),n}return new Proxy(n,{get(i,r){return r===A?s():s()[r]},set(i,r,a){return s()[r]=a,!0},has(i,r){return r===A?!0:Reflect.has(s(),r)},ownKeys(){return Reflect.ownKeys(s())},getOwnPropertyDescriptor(i,r){return o||(Object.assign(n,e(n)),o=!0),Object.getOwnPropertyDescriptor(i,r)}})}const B=window.state=at({lastTenTicks:[],hasNaN:!1,NaNPath:[]}),Gt=je({id:"",devSpeed:null,name:"",tabs:[],time:-1,autosave:!0,offlineProd:!0,offlineTime:null,timePlayed:0,keepGoing:!1,modID:"",modVersion:"",layers:{}});function Ht(e){return JSON.stringify(e,(t,n)=>l(n))}const zt={get(e,t){var o;if(t===A||t===Pe)return e[t];const n=e[A][t];if(t!=="value"&&(_n(n)||Array.isArray(n))){if(n!==((o=e[t])==null?void 0:o[A])){const s=[...e[Pe],t];e[t]=new Proxy({[A]:n,[Pe]:s},zt)}return e[t]}return n},set(e,t,n,o){if(!B.hasNaN&&(typeof n=="number"&&isNaN(n)||n instanceof v&&(isNaN(n.sign)||isNaN(n.layer)||isNaN(n.mag)))){const s=e[A][t];if(!(typeof s=="number"&&isNaN(s)||s instanceof v&&(isNaN(s.sign)||isNaN(s.layer)||isNaN(s.mag))))throw Gt.autosave=!1,B.hasNaN=!0,B.NaNPath=[...e[Pe],t],B.NaNReceiver=o,console.error("Attempted to set NaN value",[...e[Pe],t],e[A]),"Attempted to set NaN value. See above for details"}return e[A][t]=n,!0},ownKeys(e){return Reflect.ownKeys(e[A])},has(e,t){return Reflect.has(e[A],t)},getOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e[A],t)}},b=window.player=new Proxy({[A]:Gt,[Pe]:["player"]},zt),z=Mt();let Re=null,Ee=null;function nt(){const e=Date.now();let t=(e-b.time)/1e3;b.time=e;const n=t;if(B.lastTenTicks.push(n),B.lastTenTicks.length>10&&(B.lastTenTicks=B.lastTenTicks.slice(1)),!((Ee==null?void 0:Ee.value)&&!b.keepGoing)&&!B.hasNaN&&(t=Math.max(t,0),b.devSpeed!==0)){if(b.offlineTime!=null){if(v.gt(b.offlineTime,x.offlineLimit*3600)&&(b.offlineTime=x.offlineLimit*3600),v.gt(b.offlineTime,0)&&b.devSpeed!==0){const o=Math.max(b.offlineTime/10,t);b.offlineTime=b.offlineTime-o,t+=o}else b.devSpeed===0&&(b.offlineTime+=t);(!b.offlineProd||v.lt(b.offlineTime,0))&&(b.offlineTime=null)}t=Math.min(t,x.maxTickLength),b.devSpeed!=null&&(t*=b.devSpeed),Number.isFinite(t)||(t=1e308),!v.eq(t,0)&&(b.timePlayed+=t,Number.isFinite(b.timePlayed)||(b.timePlayed=1e308),z.emit("update",t,n),j.unthrottled?(requestAnimationFrame(nt),Re!=null&&(clearInterval(Re),Re=null)):Re==null&&(Re=setInterval(nt,50)))}}async function ro(){Ee=(await Ae(()=>Promise.resolve().then(()=>rn),void 0,import.meta.url)).hasWon,oe(Ee,e=>{e&&z.emit("gameWon")}),j.unthrottled?requestAnimationFrame(nt):Re=setInterval(nt,50)}document.fonts.onloadingdone=()=>z.emit("fontsLoaded");const uo=Object.freeze(Object.defineProperty({__proto__:null,globalBus:z,startGameLoop:ro},Symbol.toStringTag,{value:"Module"}));function jt(e={}){return Object.assign({id:`${x.id}-0`,name:"Default Save",tabs:x.initialTabs.slice(),time:Date.now(),autosave:!0,offlineProd:!0,offlineTime:0,timePlayed:0,keepGoing:!1,modID:x.id,modVersion:x.versionNumber,layers:{}},e)}function le(e){const t=ve.compressToUTF16(Ht(e!=null?e:b[A]));return localStorage.setItem((e!=null?e:b[A]).id,t),t}async function co(){po();try{let e=localStorage.getItem(j.active);if(e==null){await we(Oe());return}if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=ve.decompressFromUTF16(e);else throw"Unable to determine save encoding";const t=JSON.parse(e);if(t.modID!==x.id){await we(Oe());return}t.id=j.active,await we(t)}catch(e){console.error(`Failed to load save. Falling back to new save.
`,e),await we(Oe())}}function Oe(){const e=Xe(),t=jt({id:e});return le(t),j.saves.push(e),t}function Xe(){let e,t=0;do e=`${x.id}-${t++}`;while(localStorage.getItem(e));return e}async function we(e){console.info("Loading save",e);const{layers:t,removeLayer:n,addLayer:o}=await Ae(()=>Promise.resolve().then(()=>Io),void 0,import.meta.url),{fixOldSave:s,getInitialLayers:i}=await Ae(()=>Promise.resolve().then(()=>rn),void 0,import.meta.url);for(const r in t){const a=t[r];a&&n(a)}i(e).forEach(r=>o(r,e)),e=jt(e),e.offlineProd&&e.time&&(e.offlineTime==null&&(e.offlineTime=0),e.offlineTime+=(Date.now()-e.time)/1e3),e.time=Date.now(),e.modVersion!==x.versionNumber&&s(e.modVersion,e),Object.assign(b,e),j.active=b.id,z.emit("onLoad")}setInterval(()=>{b.autosave&&le()},1e3);window.onbeforeunload=()=>{b.autosave&&le()};window.save=le;const fo=window.hardReset=async()=>{await we(Oe())},Ge=je({active:"",saves:[],showTPS:!0,theme:yt.Nordic,unthrottled:!1});oe(Ge,e=>{const t=ve.compressToUTF16(JSON.stringify(e));localStorage.setItem(x.id,t)},{deep:!0});const j=window.settings=Ge;window.hardResetSettings=()=>{const e={active:"",saves:[],showTPS:!0,theme:yt.Nordic};z.emit("loadSettings",e),Object.assign(Ge,e),fo()};function po(){try{let e=localStorage.getItem(x.id);if(e!=null&&e!==""){if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=ve.decompressFromUTF16(e);else{console.warn("Unable to determine settings encoding",e);return}const t=JSON.parse(e);typeof t=="object"&&Object.assign(Ge,t)}z.emit("loadSettings",Ge)}catch{}}const vo=je([]),Wt=je([]);function mo(e){Wt.push(e)}const _o=je([]);function J(e,t="span"){return typeof e=="function"?I({render:e}):typeof e=="string"?e.length>0?(e=e.trim(),e.charAt(0)!=="<"&&(e=`<${t}>${e}</${t}>`),I({template:e})):I({render:()=>({})}):e}function We(e){if(ct(e))return typeof e=="function"?e():J(e);const t=e[_e];return p(t,e[ge](),null)}function Qe(e){if(ct(e))return typeof e=="function"?e():typeof e=="string"?p(Y,null,[e]):p(e,null,null);const t=e[_e];return p(t,e[ge](),null)}function ct(e){return typeof e=="string"?!0:typeof e=="object"?e==null?!1:"render"in e||"component"in e:typeof e=="function"&&e[Fe]===!0}function qt(e,t){const n=C(null),o=C(void 0);function s(a){n.value||(n.value=setInterval(r,250)),o.value=a}function i(){n.value&&(clearInterval(n.value),n.value=null)}function r(){t&&t.value?t.value():e&&e.value&&e.value(o.value)}return Dt(i),{start:s,stop:i,handleHolding:r}}function go(e,t="div"){const n=ae();return Ne(()=>{n.value=J(re(e),t)}),n}function qe(e,t="div"){const n=ae(null);return Ne(()=>{const o=re(e);n.value=o==null?null:J(o,t)}),n}function yo(e){return S(()=>re(e))}function re(e){return l(l(e))}function M(...e){return e.includes(Object)||e.push(Object),e}const ho=I({__name:"Context",emits:["updateNodes"],setup(e,{emit:t}){var _;const n=C({}),o=new ResizeObserver(a),s=C(null);rt(()=>{const m=s.value;m!=null&&o.observe(m)});let i=!0,r=C((_=s.value)==null?void 0:_.getBoundingClientRect());function a(){i&&(i=!1,ye(()=>{var m;r.value=(m=s.value)==null?void 0:m.getBoundingClientRect(),Object.values(n.value).filter(g=>g).forEach(g=>g.rect=g.element.getBoundingClientRect()),t("updateNodes",n.value),i=!0}))}z.on("fontsLoaded",a);const c={attributes:!1,childList:!0,subtree:!1};Ye(bt,(m,g)=>{const w=new MutationObserver(()=>d(m));w.observe(g,c),n.value[m]={element:g,observer:w,rect:g.getBoundingClientRect()},a()}),Ye(kt,m=>{var g;(g=n.value[m])==null||g.observer.disconnect(),n.value[m]=void 0,a()}),Ye(wt,n),Ye(Nt,r);function d(m){const g=n.value[m];g!=null&&(g.rect=g.element.getBoundingClientRect(),t("updateNodes",n.value))}return(m,g)=>(f(),y(Y,null,[me(m.$slots,"default",{},void 0,!0),u("div",{ref_key:"resizeListener",ref:s,class:"resize-listener"},null,512)],64))}});const E=(e,t)=>{const n=e.__vccOpts||e;for(const[o,s]of t)n[o]=s;return n},Kt=E(ho,[["__scopeId","data-v-4fc505f1"]]),bo=["onPointerdown"],ko={class:"modal-wrapper"},wo={class:"modal-container"},No={class:"modal-header"},$o={class:"modal-body"},So={class:"modal-footer"},Co=u("div",{class:"modal-default-flex-grow"},null,-1),Ce=I({__name:"Modal",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const s=X(e),i=S(()=>s.modelValue||a.value);function r(){n("update:modelValue",!1)}const a=C(!1),c=C(null),d=S(()=>{var _,m;return(m=(_=c.value)==null?void 0:_.nodes)!=null?m:null});return t({isOpen:i,nodes:d}),(_,m)=>(f(),O(dn,{to:"#modal-root"},[p(gt,{name:"modal",onBeforeEnter:m[0]||(m[0]=g=>a.value=!0),onAfterLeave:m[1]||(m[1]=g=>a.value=!1)},{default:R(()=>[_t(u("div",$e({class:"modal-mask",onPointerdown:Ue(r,["self"])},_.$attrs),[u("div",ko,[u("div",wo,[u("div",No,[me(_.$slots,"header",{shown:l(i)},()=>[V(" default header ")])]),u("div",$o,[p(Kt,{ref_key:"contextRef",ref:c},{default:R(()=>[me(_.$slots,"body",{shown:l(i)},()=>[V(" default body ")])]),_:3},512)]),u("div",So,[me(_.$slots,"footer",{shown:l(i)},()=>[u("div",{class:"modal-default-footer"},[Co,u("button",{class:"button modal-default-button",onClick:r}," Close ")])])])])])],16,bo),[[un,e.modelValue]])]),_:3})]))}});const He=Symbol("PersistentState"),ze=Symbol("DefaultValue"),ot=Symbol("StackTrace"),Jt=Symbol("Deleted");function To(){var e;return((e=new Error().stack)==null?void 0:e.split(`
`).slice(3,5).map(t=>t.trim()).join(`
`))||""}function Ke(e){const t=H(e)?e:C(e);return t[He]=t,t[ze]=H(e)?e.value:e,t[ot]=To(),t[Jt]=!1,ie.length===0?console.warn("Creating a persistent ref outside of a layer. This is not officially supported",t,`
Created at:
`+t[ot]):Ie[ie[ie.length-1]].add(t),t}z.on("addLayer",(e,t)=>{const n=[],o=(s,i=[])=>{let r=!1;return Object.keys(s).forEach(a=>{const c=s[a];if(c&&typeof c=="object")if(He in c){if(r=!0,c[Jt]){console.warn("Deleted persistent ref present in returned object. Ignoring...",c,`
Created at:
`+c[ot]);return}Ie[e.id].delete(A in c?c[A]:c);const d=i.reduce((m,g)=>(g in m||(m[g]={}),m[g]),t),_=d[a];d[a]=c[He],cn(d)?_!=null?d[a]=_:d[a]=c[ze]:_!=null?d[a].value=_:d[a].value=c[ze]}else!(c instanceof v)&&!H(c)&&!n.includes(c)&&(typeof c.type=="symbol"&&n.push(c),o(c,[...i,a])&&(Pt(c)&&!Pt(s)?console.warn("Found array that contains persistent values when adding layer. Keep in mind changing the order of elements in the array will mess with existing player saves.",A in s?s[A]:s,a):r=!0))}),r};o(e),Ie[e.id].forEach(s=>{console.error(`Created persistent ref in ${e.id} without registering it to the layer! Make sure to include everything persistent in the returned object`,s,`
Created at:
`+s[ot])}),Ie[e.id].clear()});const bt=Symbol("RegisterNode"),kt=Symbol("UnregisterNode"),wt=Symbol("Nodes"),Nt=Symbol("Bounds"),Z=at({});window.layers=Z;const Ie={},ie=[];function $t(e,t){return Se(()=>{const n={},o=n.emitter=Mt();if(n.on=o.on.bind(o),n.emit=o.emit.bind(o),n.nodes=C({}),n.id=e,ie.push(e),Ie[e]=new Set,n.minimized=Ke(!1),Object.assign(n,t.call(n)),ie[ie.length-1]==null||ie[ie.length-1]!==e)throw`Adding layers stack in invalid state. This should not happen
Stack: ${ie}
Trying to pop ${n.id}`;return ie.pop(),P(n,"color"),P(n,"display"),P(n,"name"),K(n,"name",n.id),P(n,"minWidth"),K(n,"minWidth",600),P(n,"minimizable"),K(n,"minimizable",!0),n})}function Yt(e,t){if(console.info("Adding layer",e.id),Z[e.id]){console.error("Attempted to add layer with same ID as existing layer",e.id,Z[e.id]);return}K(t,"layers",{}),t.layers[e.id]==null&&(t.layers[e.id]={}),Z[e.id]=e,z.emit("addLayer",e,t.layers[e.id])}function Po(e){return Z[e]}function Zt(e){console.info("Removing layer",e.id),z.emit("removeLayer",e),Z[e.id]=void 0}function Ro(e){Zt(e),Yt(e,b)}function Oo(e){const t=C(!1);return{openModal:()=>t.value=!0,modal:W(()=>p(Ce,{modelValue:t.value,"onUpdate:modelValue":n=>t.value=n},{header:()=>p("h2",null,[l(e.name)]),body:l(e.display)}))}}z.on("update",function(t){Object.values(Z).forEach(n=>{n==null||n.emit("preUpdate",t)}),Object.values(Z).forEach(n=>{n==null||n.emit("update",t)}),Object.values(Z).forEach(n=>{n==null||n.emit("postUpdate",t)})});const Io=Object.freeze(Object.defineProperty({__proto__:null,RegisterNodeInjectionKey:bt,UnregisterNodeInjectionKey:kt,NodesInjectionKey:wt,BoundsInjectionKey:Nt,layers:Z,persistentRefs:Ie,addingLayers:ie,createLayer:$t,addLayer:Yt,getLayer:Po,removeLayer:Zt,reloadLayer:Ro,setupLayerModal:Oo},Symbol.toStringTag,{value:"Module"})),Vo=I({components:{Context:Kt},props:{index:{type:Number,required:!0},tab:{type:Function,required:!0},display:{type:M(Object,String,Function),required:!0},minimized:{type:Object,required:!0},minWidth:{type:M(Number,String),required:!0},name:{type:M(String),required:!0},color:M(String),minimizable:M(Boolean),nodes:{type:Object,required:!0}},setup(e){const{display:t,index:n,minimized:o,minWidth:s,tab:i}=X(e),r=go(t),a=S(()=>x.allowGoBack&&n.value>0&&!o.value);function c(){b.tabs.splice(l(e.index),1/0)}ye(()=>_(o.value,l(s.value))),oe([o,yo(s)],([m,g])=>_(m,g));function d(m){e.nodes.value=m}function _(m,g){const w=typeof g=="number"||Number.isNaN(parseInt(g))?g+"px":g,$=i.value();$!=null&&(m?($.style.flexGrow="0",$.style.flexShrink="0",$.style.width="60px",$.style.minWidth=$.style.flexBasis="",$.style.margin="0"):($.style.flexGrow="",$.style.flexShrink="",$.style.width="",$.style.minWidth=$.style.flexBasis=w,$.style.margin=""))}return{component:r,showGoBack:a,updateNodes:d,unref:l,goBack:c}}});function Do(e,t,n,o,s,i){const r=Ve("Context");return f(),y("div",{class:"layer-container",style:se({"--layer-color":e.unref(e.color)})},[e.showGoBack?(f(),y("button",{key:0,class:"goBack",onClick:t[0]||(t[0]=(...a)=>e.goBack&&e.goBack(...a))},"\u2190")):T("",!0),e.minimized.value?(f(),y("button",{key:1,class:"layer-tab minimized",onClick:t[1]||(t[1]=a=>e.minimized.value=!1)},[u("div",null,D(e.unref(e.name)),1)])):(f(),y("div",{key:2,class:Q(["layer-tab",{showGoBack:e.showGoBack}])},[p(r,{onUpdateNodes:e.updateNodes},{default:R(()=>[(f(),O(q(e.component)))]),_:1},8,["onUpdateNodes"])],2)),e.unref(e.minimizable)?(f(),y("button",{key:3,class:"minimize",onClick:t[2]||(t[2]=a=>e.minimized.value=!0)}," \u25BC ")):T("",!0)],4)}const xo=E(Vo,[["render",Do],["__scopeId","data-v-457f4d1e"]]),Xt=e=>(he("data-v-d3087567"),e=e(),be(),e),Mo=Xt(()=>u("h2",null,"Changelog",-1)),Lo=Xt(()=>u("details",{open:""},[u("summary",null,[V("v0.0 Initial Commit - "),u("time",null,"2021-09-04")]),V(" This is the first release :D "),u("ul",null,[u("li",{class:"feature"},"Did everything"),u("li",{class:"fix"},"Had some fun"),u("li",{class:"breaking"},"Removed everything"),u("li",{class:"balancing"},"Created some bugs to fix later")])],-1)),Bo=I({__name:"Changelog",setup(e,{expose:t}){const n=C(!1);return t({open(){n.value=!0}}),(o,s)=>(f(),O(Ce,{modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=i=>n.value=i)},{header:R(()=>[Mo]),body:R(()=>[Lo]),_:1},8,["modelValue"]))}});const Eo=E(Bo,[["__scopeId","data-v-d3087567"]]),Uo=I({props:{element:Object,display:{type:M(Object,String,Function),required:!0},style:M(Object,String,Array),classes:M(Object),direction:M(String),xoffset:M(String),yoffset:M(String),pinned:Object},setup(e){const{element:t,display:n,pinned:o}=X(e),s=C(!1),i=S(()=>(re(o)||s.value)&&r.value),r=qe(n),a=ae(J(W(()=>{const _=re(t);return _==null?"":Qe(_)})));function c(_){const m=o;_.shiftKey&&m&&(m.value=!m.value,_.stopPropagation(),_.preventDefault())}const d=S(()=>re(o)&&ht[j.theme].showPin);return{Direction:G,isHovered:s,isShown:i,comp:r,elementComp:a,unref:l,togglePinned:c,showPin:d}}});const Ao={key:0,class:"material-icons pinned"};function Fo(e,t,n,o,s,i){return f(),y("div",{class:Q(["tooltip-container",{shown:e.isShown}]),onMouseenter:t[0]||(t[0]=r=>e.isHovered=!0),onMouseleave:t[1]||(t[1]=r=>e.isHovered=!1),onClickCapture:t[2]||(t[2]=(...r)=>e.togglePinned&&e.togglePinned(...r))},[me(e.$slots,"default",{},void 0,!0),e.elementComp?(f(),O(q(e.elementComp),{key:0})):T("",!0),p(gt,{name:"fade"},{default:R(()=>{var r;return[e.isShown?(f(),y("div",{key:0,class:Q(["tooltip",{top:e.unref(e.direction)===e.Direction.Up,left:e.unref(e.direction)===e.Direction.Left,right:e.unref(e.direction)===e.Direction.Right,bottom:e.unref(e.direction)===e.Direction.Down,...e.unref(e.classes)}]),style:se([{"--xoffset":e.unref(e.xoffset)||"0px","--yoffset":e.unref(e.yoffset)||"0px"},(r=e.unref(e.style))!=null?r:{}])},[e.showPin?(f(),y("span",Ao,"push_pin")):T("",!0),e.comp?(f(),O(q(e.comp),{key:1})):T("",!0)],6)):T("",!0)]}),_:1})],34)}const F=E(Uo,[["render",Fo],["__scopeId","data-v-940dca78"]]),Te=e=>(he("data-v-c10e61da"),e=e(),be(),e),Go={class:"info-modal-header"},Ho=["src","alt"],zo={class:"info-modal-title"},jo={key:0},Wo={key:0},qo={key:0},Ko=Te(()=>u("div",null," Made in Profectus, by thepaperpilot with inspiration from Acameada and Jacorb ",-1)),Jo=Te(()=>u("br",null,null,-1)),Yo=Te(()=>u("br",null,null,-1)),Zo=["href"],Xo=Te(()=>u("span",{class:"material-icons info-modal-discord"},"discord",-1)),Qo=Te(()=>u("div",null,[u("a",{href:"https://discord.gg/WzejVAx",class:"info-modal-discord-link"},[u("span",{class:"material-icons info-modal-discord"},"discord"),V(" The Paper Pilot Community ")])],-1)),es=Te(()=>u("div",null,[u("a",{href:"https://discord.gg/F3xveHV",class:"info-modal-discord-link"},[u("span",{class:"material-icons info-modal-discord"},"discord"),V(" The Modding Tree ")])],-1)),ts=Te(()=>u("br",null,null,-1)),ns=I({__name:"Info",props:{changelog:null},setup(e,{expose:t}){const n=e,{title:o,logo:s,author:i,discordName:r,discordLink:a,versionNumber:c,versionTitle:d}=x,_=X(n),m=C(!1),g=S(()=>ut(b.timePlayed)),w=S(()=>J(W(()=>p(Y,null,[Wt.map(We)]))));t({open(){m.value=!0}});function $(){var h;(h=l(_.changelog))==null||h.open()}return(h,U)=>(f(),O(Ce,{modelValue:m.value,"onUpdate:modelValue":U[0]||(U[0]=Me=>m.value=Me)},{header:R(()=>[u("div",Go,[l(s)?(f(),y("img",{key:0,class:"info-modal-logo",src:l(s),alt:l(o)},null,8,Ho)):T("",!0),u("div",zo,[u("h2",null,D(l(o)),1),u("h4",null,[V(" v"+D(l(c)),1),l(d)?(f(),y("span",jo,": "+D(l(d)),1)):T("",!0)])])])]),body:R(({shown:Me})=>[Me?(f(),y("div",Wo,[l(i)?(f(),y("div",qo,"By "+D(l(i)),1)):T("",!0),Ko,Jo,u("div",{class:"link",onClick:$},"Changelog"),Yo,u("div",null,[l(a)?(f(),y("a",{key:0,href:l(a),class:"info-modal-discord-link"},[Xo,V(" "+D(l(r)),1)],8,Zo)):T("",!0)]),Qo,es,ts,u("div",null,"Time Played: "+D(l(g)),1),(f(),O(q(l(w))))])):T("",!0)]),_:1},8,["modelValue"]))}});const os=E(ns,[["__scopeId","data-v-c10e61da"]]);const ss={class:"field"},ls={key:0,class:"field-title"},Qt=I({__name:"Select",props:{title:null,modelValue:null,options:null,placeholder:null,closeOnSelect:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){var r;const n=e,o=qe(ue(n,"title"),"span"),s=C((r=n.options.find(a=>a.value===n.modelValue))!=null?r:null);oe(ue(n,"modelValue"),a=>{var c;re(s)!==a&&(s.value=(c=n.options.find(d=>d.value===a))!=null?c:null)});function i(a){t("update:modelValue",a.value)}return(a,c)=>(f(),y("div",ss,[l(o)?(f(),y("span",ls,[(f(),O(q(l(o))))])):T("",!0),p(l(gn),{options:e.options,modelValue:s.value,"onUpdate:modelValue":[c[0]||(c[0]=d=>s.value=d),i],min:1,"label-by":"label",placeholder:e.placeholder,"close-on-select":e.closeOnSelect},null,8,["options","modelValue","placeholder","close-on-select"])]))}});const is={class:"field"},as=I({__name:"Toggle",props:{title:null,modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,o=S(()=>J(l(n.title)||"<span></span>","span")),s=S({get(){return!!n.modelValue},set(i){t("update:modelValue",i)}});return(i,r)=>(f(),y("label",is,[_t(u("input",{type:"checkbox",class:"toggle","onUpdate:modelValue":r[0]||(r[0]=a=>H(s)?s.value=a:null)},null,512),[[fn,l(s)]]),(f(),O(q(l(o))))]))}});const pe=E(as,[["__scopeId","data-v-2cda5748"]]),en=e=>(he("data-v-02d495b4"),e=e(),be(),e),rs=en(()=>u("div",{class:"header"},[u("h2",null,"Options")],-1)),us=en(()=>u("hr",null,null,-1)),ds=I({__name:"Options",setup(e,{expose:t}){const n=C(!1);t({open(){n.value=!0}});const o=Object.keys(ht).map($=>({label:io($),value:$})),s=S(()=>J(W(()=>p(Y,null,[vo.map(We)])))),{showTPS:i,theme:r,unthrottled:a}=X(j),{autosave:c,offlineProd:d}=X(b),_=S({get(){return b.devSpeed===0},set($){b.devSpeed=$?0:null}}),m=W(()=>p("span",null,[V("Offline Production"),p(F,{display:"Save-specific"},{default:()=>[V("*")]})])),g=W(()=>p("span",null,[V("Autosave"),p(F,{display:"Save-specific"},{default:()=>[V("*")]})])),w=W(()=>p("span",null,[V("Pause game"),p(F,{display:"Save-specific"},{default:()=>[V("*")]})]));return($,h)=>(f(),O(Ce,{modelValue:n.value,"onUpdate:modelValue":h[6]||(h[6]=U=>n.value=U)},{header:R(()=>[rs]),body:R(()=>[p(Qt,{title:"Theme",options:l(o),modelValue:l(r),"onUpdate:modelValue":h[0]||(h[0]=U=>H(r)?r.value=U:null)},null,8,["options","modelValue"]),(f(),O(q(l(s)))),p(pe,{title:"Show TPS",modelValue:l(i),"onUpdate:modelValue":h[1]||(h[1]=U=>H(i)?i.value=U:null)},null,8,["modelValue"]),us,p(pe,{title:"Unthrottled",modelValue:l(a),"onUpdate:modelValue":h[2]||(h[2]=U=>H(a)?a.value=U:null)},null,8,["modelValue"]),p(pe,{title:l(m),modelValue:l(d),"onUpdate:modelValue":h[3]||(h[3]=U=>H(d)?d.value=U:null)},null,8,["title","modelValue"]),p(pe,{title:l(g),modelValue:l(c),"onUpdate:modelValue":h[4]||(h[4]=U=>H(c)?c.value=U:null)},null,8,["title","modelValue"]),l(x).enablePausing?(f(),O(pe,{key:0,title:l(w),modelValue:l(_),"onUpdate:modelValue":h[5]||(h[5]=U=>H(_)?_.value=U:null)},null,8,["title","modelValue"])):T("",!0)]),_:1},8,["modelValue"]))}});const cs=E(ds,[["__scopeId","data-v-02d495b4"]]),fs=["onSubmit"],ps={class:"field"},vs={key:0,class:"field-title"},ms=["placeholder"],_s=I({__name:"Text",props:{title:null,modelValue:null,textArea:{type:Boolean},placeholder:null,maxHeight:null,submitOnBlur:{type:Boolean}},emits:["update:modelValue","submit","cancel"],setup(e,{emit:t}){const n=e,o=qe(ue(n,"title"),"span"),s=ae(null);rt(()=>{var c;(c=s.value)==null||c.focus()});const i=S({get(){return l(n.modelValue)||""},set(c){t("update:modelValue",c)}});function r(){t("submit")}function a(){n.submitOnBlur!==!1?t("submit"):t("cancel")}return(c,d)=>(f(),y("form",{onSubmit:Ue(r,["prevent"])},[u("div",ps,[l(o)?(f(),y("span",vs,[(f(),O(q(l(o))))])):T("",!0),e.textArea?(f(),O(l(hn),{key:1,modelValue:l(i),"onUpdate:modelValue":d[0]||(d[0]=_=>H(i)?i.value=_:null),placeholder:e.placeholder,maxHeight:e.maxHeight,onBlur:a,ref_key:"field",ref:s},null,8,["modelValue","placeholder","maxHeight"])):_t((f(),y("input",{key:2,type:"text","onUpdate:modelValue":d[1]||(d[1]=_=>H(i)?i.value=_:null),placeholder:e.placeholder,class:Q({fullWidth:!e.title}),onBlur:a,ref_key:"field",ref:s},null,42,ms)),[[pn,l(i)]])])],40,fs))}});const tn=E(_s,[["__scopeId","data-v-9678a23e"]]),gs={key:0},ys=["onClick","disabled"],hs={key:0},bs=["onClick"],ks=I({__name:"DangerButton",props:{disabled:{type:Boolean},skipConfirm:{type:Boolean}},emits:["click","confirmingChanged"],setup(e,{emit:t}){const o=X(e),s=C(!1);oe(s,a=>{t("confirmingChanged",a)});function i(){if(l(o.skipConfirm)){t("click");return}s.value&&t("click"),s.value=!s.value}function r(){s.value=!1}return(a,c)=>(f(),y("span",{class:Q(["container",{confirming:s.value}])},[s.value?(f(),y("span",gs,"Are you sure?")):T("",!0),u("button",{onClick:Ue(i,["stop"]),class:"button danger",disabled:e.disabled},[s.value?(f(),y("span",hs,"Yes")):me(a.$slots,"default",{key:1},void 0,!0)],8,ys),s.value?(f(),y("button",{key:1,class:"button",onClick:Ue(r,["stop"])},"No",8,bs)):T("",!0)],2))}});const ws=E(ks,[["__scopeId","data-v-5ecc3f97"]]),Ns=["onClick"],$s=I({__name:"FeedbackButton",props:{left:{type:Boolean}},emits:["click"],setup(e,{emit:t}){const n=C(!1),o=C(null);function s(){t("click"),o.value&&clearTimeout(o.value),n.value=!1,ye(()=>{n.value=!0,o.value=setTimeout(()=>n.value=!1,500)})}return(i,r)=>(f(),y("button",{onClick:Ue(s,["stop"]),class:Q(["feedback",{activated:n.value,left:e.left}])},[me(i.$slots,"default",{},void 0,!0)],10,Ns))}});const Ss=E($s,[["__scopeId","data-v-939dc3c4"]]),ce=e=>(he("data-v-b6be01e7"),e=e(),be(),e),Cs=ce(()=>u("div",{class:"handle material-icons"},"drag_handle",-1)),Ts={key:0,class:"actions"},Ps=ce(()=>u("span",{class:"material-icons"},"content_paste",-1)),Rs=ce(()=>u("span",{class:"material-icons"},"content_copy",-1)),Os=ce(()=>u("span",{class:"material-icons"},"edit",-1)),Is=ce(()=>u("span",{class:"material-icons",style:{margin:"-2px"}},"delete",-1)),Vs={key:1,class:"actions"},Ds=ce(()=>u("span",{class:"material-icons"},"check",-1)),xs=ce(()=>u("span",{class:"material-icons"},"close",-1)),Ms={key:2,class:"details"},Ls={class:"save-version"},Bs=ce(()=>u("br",null,null,-1)),Es={key:0},Us={key:3,class:"details"},As={key:4,class:"details error"},Fs=ce(()=>u("br",null,null,-1)),Gs=I({__name:"Save",props:{save:null},emits:["export","open","duplicate","delete","editName"],setup(e,{emit:t}){const n=e,{save:o}=X(n),s=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),i=C(!1),r=C(!1),a=C("");oe(i,()=>a.value=o.value.name||"");const c=S(()=>o.value&&o.value.id===b.id),d=S(()=>c.value?b.time:o.value&&o.value.time||0);function _(){t("editName",a.value),i.value=!1}return(m,g)=>(f(),y("div",{class:Q(["save",{active:l(c)}])},[Cs,i.value?(f(),y("div",Vs,[u("button",{onClick:_,class:"button"},[p(F,{display:"Save",direction:l(G).Left,class:"info"},{default:R(()=>[Ds]),_:1},8,["direction"])]),u("button",{onClick:g[5]||(g[5]=w=>i.value=!i.value),class:"button"},[p(F,{display:"Cancel",direction:l(G).Left,class:"info"},{default:R(()=>[xs]),_:1},8,["direction"])])])):(f(),y("div",Ts,[l(o).error==null&&!r.value?(f(),O(Ss,{key:0,onClick:g[0]||(g[0]=w=>t("export")),class:"button",left:""},{default:R(()=>[p(F,{display:"Export",direction:l(G).Left,class:"info"},{default:R(()=>[Ps]),_:1},8,["direction"])]),_:1})):T("",!0),l(o).error==null&&!r.value?(f(),y("button",{key:1,onClick:g[1]||(g[1]=w=>t("duplicate")),class:"button"},[p(F,{display:"Duplicate",direction:l(G).Left,class:"info"},{default:R(()=>[Rs]),_:1},8,["direction"])])):T("",!0),l(o).error==null&&!r.value?(f(),y("button",{key:2,onClick:g[2]||(g[2]=w=>i.value=!i.value),class:"button"},[p(F,{display:"Edit Name",direction:l(G).Left,class:"info"},{default:R(()=>[Os]),_:1},8,["direction"])])):T("",!0),p(ws,{disabled:l(c),onClick:g[3]||(g[3]=w=>t("delete")),onConfirmingChanged:g[4]||(g[4]=w=>r.value=w)},{default:R(()=>[p(F,{display:"Delete",direction:l(G).Left,class:"info"},{default:R(()=>[Is]),_:1},8,["direction"])]),_:1},8,["disabled"])])),l(o).error==null&&!i.value?(f(),y("div",Ms,[u("button",{class:"button open",onClick:g[6]||(g[6]=w=>t("open"))},[u("h3",null,D(l(o).name),1)]),u("span",Ls,"v"+D(l(o).modVersion),1),Bs,l(d)?(f(),y("div",Es,"Last played "+D(l(s).format(l(d))),1)):T("",!0)])):l(o).error==null&&i.value?(f(),y("div",Us,[p(tn,{modelValue:a.value,"onUpdate:modelValue":g[7]||(g[7]=w=>a.value=w),class:"editname",onSubmit:_},null,8,["modelValue"])])):(f(),y("div",As,[V(" Error: Failed to load save with id "+D(l(o).id),1),Fs,V(D(l(o).error),1)]))],2))}});const Hs=E(Gs,[["__scopeId","data-v-b6be01e7"]]),St=e=>(he("data-v-229caf48"),e=e(),be(),e),zs=St(()=>u("h2",null,"Saves Manager",-1)),js={class:"modal-footer"},Ws={class:"field"},qs=St(()=>u("span",{class:"field-title"},"Create Save",-1)),Ks={class:"field-buttons"},Js={class:"footer"},Ys=St(()=>u("div",{style:{"flex-grow":"1"}},null,-1)),Zs=I({__name:"SavesManager",setup(e,{expose:t}){const n=C(!1),o=C(null);t({open(){n.value=!0}});const s=C(!1),i=C(""),r=C(null);oe(i,k=>{k?ye(()=>{try{if(k[0]!=="{")if(k[0]==="e")k=decodeURIComponent(escape(atob(k)));else if(k[0]==="\u1BE1")k=ve.decompressFromUTF16(k);else{console.warn("Unable to determine preset encoding",k),s.value=!0;return}const N=JSON.parse(k);if(typeof N!="object"){s.value=!0;return}const L=Xe();N.id=L,le(N),i.value="",s.value=!1,j.saves.push(L)}catch{s.value=!0}}):s.value=!1});let a=Object.assign({}),c=C(Object.keys(a).reduce((k,N)=>(k.push({label:N.split("/").slice(-1)[0].slice(0,-4),value:a[N]}),k),[]));const d=at({});function _(k){if(d[k]==null){let N=localStorage.getItem(k);if(N==null)d[k]={error:"Save doesn't exist in localStorage",id:k};else if(N==="dW5kZWZpbmVk")d[k]={error:"Save is undefined",id:k};else try{if(N[0]!=="{")if(N[0]==="e")N=decodeURIComponent(escape(atob(N)));else if(N[0]==="\u1BE1")N=ve.decompressFromUTF16(N);else return console.warn("Unable to determine preset encoding",N),s.value=!0,d[k]={error:"Unable to determine preset encoding",id:k},d[k];d[k]={...JSON.parse(N),id:k}}catch(L){d[k]={error:L,id:k},console.warn(`SavesManager: Failed to load info about save with id ${k}:
${L}
${N}`)}}return d[k]}oe(n,k=>{k&&Object.keys(d).forEach(N=>delete d[N])});const m=S(()=>j.saves.reduce((k,N)=>(k[N]=_(N),k),{}));function g(k){let N;switch(b.id===k?N=Ht(b[A]):N=JSON.stringify(m.value[k]),x.exportEncoding){default:console.warn(`Unknown save encoding: ${x.exportEncoding}. Defaulting to lz`);case"lz":N=ve.compressToUTF16(N);break;case"base64":N=btoa(unescape(encodeURIComponent(N)));break;case"plain":break}const L=document.createElement("textarea");L.value=N,document.body.appendChild(L),L.select(),L.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(L)}function w(k){b.id===k&&le();const N={...m.value[k],id:Xe()};le(N),j.saves.push(N.id)}function $(k){j.saves=j.saves.filter(N=>N!==k),localStorage.removeItem(k),d[k]=void 0}function h(k){m.value[b.id].time=b.time,le(),d[b.id]=void 0,we(m.value[k]),d[k]=void 0}function U(k){if(r.value=k,ye(()=>{r.value=null}),k[0]!=="{")if(k[0]==="e")k=decodeURIComponent(escape(atob(k)));else if(k[0]==="\u1BE1")k=ve.decompressFromUTF16(k);else{console.warn("Unable to determine preset encoding",k);return}const N=JSON.parse(k);N.id=Xe(),le(N),j.saves.push(N.id),h(N.id)}function Me(k,N){const L=m.value[k];L&&(L.name=N,b.id===k?(b.name=N,le()):(le(L),d[k]=void 0))}return(k,N)=>(f(),O(Ce,{modelValue:n.value,"onUpdate:modelValue":N[4]||(N[4]=L=>n.value=L),ref_key:"modal",ref:o},{header:R(()=>[zs]),body:R(({shown:L})=>[L?(f(),O(l(yn),{key:0,list:l(j).saves,handle:".handle",itemKey:fe=>fe},{item:R(({element:fe})=>[p(Hs,{save:l(m)[fe],onOpen:Le=>h(fe),onExport:Le=>g(fe),onEditName:Le=>Me(fe,Le),onDuplicate:Le=>w(fe),onDelete:Le=>$(fe)},null,8,["save","onOpen","onExport","onEditName","onDuplicate","onDelete"])]),_:1},8,["list","itemKey"])):T("",!0)]),footer:R(()=>[u("div",js,[p(tn,{modelValue:i.value,"onUpdate:modelValue":N[0]||(N[0]=L=>i.value=L),title:"Import Save",placeholder:"Paste your save here!",class:Q({importingFailed:s.value})},null,8,["modelValue","class"]),u("div",Ws,[qs,u("div",Ks,[u("button",{class:"button",onClick:N[1]||(N[1]=L=>h(l(Oe)().id))},"New Game"),Object.keys(l(c)).length>0?(f(),O(Qt,{key:0,options:l(c),modelValue:r.value,"onUpdate:modelValue":N[2]||(N[2]=L=>U(L)),closeOnSelect:"",placeholder:"Select preset",class:"presets"},null,8,["options","modelValue"])):T("",!0)])]),u("div",Js,[Ys,u("button",{class:"button modal-default-button",onClick:N[3]||(N[3]=L=>n.value=!1)}," Close ")])])]),_:1},8,["modelValue"]))}});const nn=E(Zs,[["__scopeId","data-v-229caf48"]]),ee=e=>(he("data-v-744d2216"),e=e(),be(),e),Xs=["src","alt"],Qs={key:1,class:"title"},el=ee(()=>u("div",{style:{"flex-grow":"1",cursor:"unset"}},null,-1)),tl={class:"discord"},nl={class:"discord-links"},ol={key:0},sl=["href"],ll=ee(()=>u("li",null,[u("a",{href:"https://discord.gg/WzejVAx",target:"_blank"},"The Paper Pilot Community")],-1)),il=ee(()=>u("li",null,[u("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),al={href:"https://forums.moddingtree.com/",target:"_blank"},rl=ee(()=>u("span",{class:"material-icons"},"forum",-1)),ul=ee(()=>u("span",{class:"material-icons"},"info",-1)),dl=ee(()=>u("span",{class:"material-icons"},"library_books",-1)),cl=ee(()=>u("span",{class:"material-icons"},"settings",-1)),fl=ee(()=>u("span",{class:"material-icons"},"library_books",-1)),pl=ee(()=>u("span",{class:"material-icons"},"settings",-1)),vl=ee(()=>u("span",{class:"material-icons"},"info",-1)),ml={href:"https://forums.moddingtree.com/",target:"_blank"},_l=ee(()=>u("span",{class:"material-icons"},"forum",-1)),gl={class:"discord"},yl={class:"discord-links"},hl={key:0},bl=["href"],kl=ee(()=>u("li",null,[u("a",{href:"https://discord.gg/WzejVAx",target:"_blank"},"The Paper Pilot Community")],-1)),wl=ee(()=>u("li",null,[u("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),Nl=I({__name:"Nav",setup(e){const t=C(null),n=C(null),o=C(null),s=C(null),{useHeader:i,banner:r,title:a,discordName:c,discordLink:d,versionNumber:_}=x;function m(){window.open(d,"mywindow")}return(g,w)=>(f(),y(Y,null,[l(i)?(f(),y("div",$e({key:0,class:"nav"},g.$attrs),[l(r)?(f(),y("img",{key:0,src:l(r),class:"banner",alt:l(a)},null,8,Xs)):(f(),y("div",Qs,D(l(a)),1)),u("div",{onClick:w[0]||(w[0]=$=>{var h;return(h=s.value)==null?void 0:h.open()}),class:"version-container"},[p(F,{display:"Changelog",direction:l(G).Down,class:"version"},{default:R(()=>[u("span",null,"v"+D(l(_)),1)]),_:1},8,["direction"])]),el,u("div",tl,[u("span",{onClick:m,class:"material-icons"},"discord"),u("ul",nl,[l(d)?(f(),y("li",ol,[u("a",{href:l(d),target:"_blank"},D(l(c)),9,sl)])):T("",!0),ll,il])]),u("div",null,[u("a",al,[p(F,{display:"Forums",direction:l(G).Down,yoffset:"5px"},{default:R(()=>[rl]),_:1},8,["direction"])])]),u("div",{onClick:w[1]||(w[1]=$=>{var h;return(h=t.value)==null?void 0:h.open()})},[p(F,{display:"Info",direction:l(G).Down,class:"info"},{default:R(()=>[ul]),_:1},8,["direction"])]),u("div",{onClick:w[2]||(w[2]=$=>{var h;return(h=n.value)==null?void 0:h.open()})},[p(F,{display:"Saves",direction:l(G).Down,xoffset:"-20px"},{default:R(()=>[dl]),_:1},8,["direction"])]),u("div",{onClick:w[3]||(w[3]=$=>{var h;return(h=o.value)==null?void 0:h.open()})},[p(F,{display:"Options",direction:l(G).Down,xoffset:"-66px"},{default:R(()=>[cl]),_:1},8,["direction"])])],16)):(f(),y("div",$e({key:1,class:"overlay-nav"},g.$attrs),[u("div",{onClick:w[4]||(w[4]=$=>{var h;return(h=s.value)==null?void 0:h.open()}),class:"version-container"},[p(F,{display:"Changelog",direction:l(G).Right,xoffset:"25%",class:"version"},{default:R(()=>[u("span",null,"v"+D(l(_)),1)]),_:1},8,["direction"])]),u("div",{onClick:w[5]||(w[5]=$=>{var h;return(h=n.value)==null?void 0:h.open()})},[p(F,{display:"Saves",direction:l(G).Right},{default:R(()=>[fl]),_:1},8,["direction"])]),u("div",{onClick:w[6]||(w[6]=$=>{var h;return(h=o.value)==null?void 0:h.open()})},[p(F,{display:"Options",direction:l(G).Right},{default:R(()=>[pl]),_:1},8,["direction"])]),u("div",{onClick:w[7]||(w[7]=$=>{var h;return(h=t.value)==null?void 0:h.open()})},[p(F,{display:"Info",direction:l(G).Right},{default:R(()=>[vl]),_:1},8,["direction"])]),u("div",null,[u("a",ml,[p(F,{display:"Forums",direction:l(G).Right,xoffset:"7px"},{default:R(()=>[_l]),_:1},8,["direction"])])]),u("div",gl,[u("span",{onClick:m,class:"material-icons"},"discord"),u("ul",yl,[l(d)?(f(),y("li",hl,[u("a",{href:l(d),target:"_blank"},D(l(c)),9,bl)])):T("",!0),kl,wl])])],16)),p(os,{ref_key:"info",ref:t,changelog:s.value},null,8,["changelog"]),p(nn,{ref_key:"savesManager",ref:n},null,512),p(cs,{ref_key:"options",ref:o},null,512),p(Eo,{ref_key:"changelog",ref:s},null,512)],64))}});const on=E(Nl,[["__scopeId","data-v-744d2216"]]),$l={class:"inner-tab"},Sl=I({__name:"Game",setup(e){const t=ue(b,"tabs"),n=S(()=>Object.keys(Z)),o=x.useHeader;function s(i){const{display:r,minimized:a,minWidth:c,name:d,color:_,minimizable:m,nodes:g}=i;return{display:r,minimized:a,minWidth:c,name:d,color:_,minimizable:m,nodes:g}}return(i,r)=>(f(),y("div",{class:Q(["tabs-container",{useHeader:l(o)}])},[(f(!0),y(Y,null,xt(l(t),(a,c)=>{var d,_;return f(),y("div",{key:c,class:Q(["tab",l((d=l(Z)[a])==null?void 0:d.classes)]),ref_for:!0,ref:`tab-${c}`,style:se(l((_=l(Z)[a])==null?void 0:_.style))},[c===0&&!l(o)?(f(),O(on,{key:0})):T("",!0),u("div",$l,[l(n).includes(a)?(f(),O(xo,$e({key:0},s(l(Z)[a]),{index:c,tab:()=>{var m;return(m=i.$refs[`tab-${c}`])==null?void 0:m[0]}}),null,16,["index","tab"])):(f(),O(q(a),{key:1,index:c},null,8,["index"]))])],6)}),128))],2))}});const Cl=E(Sl,[["__scopeId","data-v-58f0def5"]]),Tl=I({__name:"Spacer",props:{width:{default:"8px"},height:{default:"17px"}},setup(e){return(t,n)=>(f(),y("div",{style:se({width:e.width,height:e.height})},null,4))}});function sn(e,t="points",n=0,o=void 0){const s=H(e)?e:Ke(e);return s.displayName=t,s.precision=n,s.small=o,s}function Pl(e){const t=Ke(e.value);return oe(e,n=>{v.gt(n,t.value)&&(t.value=n)}),t}function Rl(e){const t=Ke(e.value);return oe(e,(n,o)=>{v.gt(n,o)&&(t.value=v.add(t.value,v.sub(n,o)))}),t}const Ol=new v("10^^8"),Il=new v("1e100");function Vl(e,t){const n=C(0),o=C(0),s=C(0);return z.on("update",r=>{if(o.value=0,v.lte(e.value,Il)){s.value=e.value;return}let a=e.value,c=s.value;if(s.value=a,v.gt(a,c))if(v.gte(a,Ol))a=v.slog(a,1e10),c=v.slog(c,1e10),n.value=a.sub(c).div(r),o.value=-1;else for(;v.div(a,c).log(10).div(r).gte("100")&&o.value<=5&&v.gt(c,0);)a=v.log10(a),c=v.log10(c),n.value=a.sub(c).div(r),o.value++}),S(()=>o.value===0?t?de(t.value,e.precision,e.small)+" "+e.displayName+"/s":"":de(n.value)+" OOM"+(o.value<0?"^OOM":"^"+o.value)+"s/sec")}function st(e,t){const n=t!=null?t:e.value;return v.eq(e.precision,0)?De(n):de(n,e.precision,e.small)}const Dl=["x1","y1","x2","y2"],xl=I({__name:"Link",props:{link:null,startNode:null,endNode:null,boundingRect:null},setup(e){const n=X(e),o=S(()=>{const i=n.startNode.value.rect,r=n.boundingRect.value,a=r?{x:i.x+i.width/2-r.x,y:i.y+i.height/2-r.y}:{x:0,y:0};return n.link.value.offsetStart&&(a.x+=n.link.value.offsetStart.x,a.y+=n.link.value.offsetStart.y),a}),s=S(()=>{const i=n.endNode.value.rect,r=n.boundingRect.value,a=r?{x:i.x+i.width/2-r.x,y:i.y+i.height/2-r.y}:{x:0,y:0};return n.link.value.offsetEnd&&(a.x+=n.link.value.offsetEnd.x,a.y+=n.link.value.offsetEnd.y),a});return(i,r)=>(f(),y("line",$e({"stroke-width":"15px",stroke:"white"},e.link,{x1:l(o).x,y1:l(o).y,x2:l(s).x,y2:l(s).y}),null,16,Dl))}}),Ml=I({__name:"Links",props:{links:null},setup(e){var c;const n=ue(e,"links"),o=C(null),s=et(wt,C({})),i=et(Nt,C(void 0)),r=C((c=o.value)==null?void 0:c.getBoundingClientRect());oe(i,()=>{var d;return r.value=(d=o.value)==null?void 0:d.getBoundingClientRect()}),rt(()=>{var d;return r.value=(d=o.value)==null?void 0:d.getBoundingClientRect()});const a=S(()=>{var _,m;const d=s.value;return(m=(_=n.value)==null?void 0:_.filter(g=>{var w,$;return((w=d[g.startNode.id])==null?void 0:w.rect)&&(($=d[g.startNode.id])==null?void 0:$.rect)}))!=null?m:[]});return(d,_)=>(f(),y(Y,null,[l(a)?(f(),y("svg",vn($e({key:0},d.$attrs)),[(f(!0),y(Y,null,xt(l(a),(m,g)=>(f(),O(xl,{key:g,link:m,boundingRect:r.value,startNode:l(s)[m.startNode.id],endNode:l(s)[m.endNode.id]},null,8,["link","boundingRect","startNode","endNode"]))),128))],16)):T("",!0),u("div",{ref_key:"resizeListener",ref:o,class:"resize-listener"},null,512)],64))}});const Ll=E(Ml,[["__scopeId","data-v-39282e13"]]),Bl=I({props:{nodes:{type:M(Array),required:!0},leftSideNodes:M(Array),rightSideNodes:M(Array),branches:M(Array)},components:{Links:Ll},setup(e){const{nodes:t,leftSideNodes:n,rightSideNodes:o}=X(e),s=ae();Ne(()=>{const a=re(t);s.value=J(W(()=>p(Y,null,[a.map(c=>p("span",{class:"row tree-row",style:"margin: 50px auto;"},[c.map(Qe)]))])))});const i=ae();Ne(()=>{const a=re(n);i.value=a?J(W(()=>p("span",{class:"left-side-nodes small"},[a.map(Qe)]))):""});const r=ae();return Ne(()=>{const a=re(o);r.value=a?J(W(()=>p("span",{class:"side-nodes small"},[a.map(Qe)]))):""}),{unref:l,nodesComp:s,leftNodesComp:i,rightNodesComp:r}}});function El(e,t,n,o,s,i){const r=Ve("Links");return f(),y(Y,null,[(f(),O(q(e.nodesComp))),e.leftNodesComp?(f(),O(q(e.leftNodesComp),{key:0})):T("",!0),e.rightNodesComp?(f(),O(q(e.rightNodesComp),{key:1})):T("",!0),e.branches?(f(),O(r,{key:2,links:e.unref(e.branches)},null,8,["links"])):T("",!0)],64)}const Ul=E(Bl,[["render",El],["__scopeId","data-v-795532bb"]]),Al={key:0},Fl={key:0,class:"mark star"},Gl=["src"],Hl=I({__name:"MarkNode",props:{mark:{type:[Boolean,String]}},setup(e){return(t,n)=>e.mark?(f(),y("div",Al,[e.mark===!0?(f(),y("div",Fl)):(f(),y("img",{key:1,class:"mark",src:e.mark},null,8,Gl))])):T("",!0)}});const ln=E(Hl,[["__scopeId","data-v-53a43fc6"]]),zl=I({__name:"Node",props:{id:null},setup(e){const n=X(e),o=et(bt,()=>{}),s=et(kt,()=>{}),i=ae(null),r=S(()=>i.value&&i.value.parentElement);return oe([r,n.id],([a,c],[d,_])=>{d&&s(l(_)),a&&o(c,a)}),Dt(()=>s(l(n.id))),(a,c)=>(f(),y("div",{class:"node",ref_key:"node",ref:i},null,512))}});const an=E(zl,[["__scopeId","data-v-20d6adaf"]]),jl=I({props:{display:M(Object,String,Function),visibility:{type:M(Number),required:!0},style:M(String,Object,Array),classes:M(Object),onClick:Function,onHold:Function,color:M(String),glowColor:M(String),canClick:{type:M(Boolean),required:!0},mark:M(Boolean,String),id:{type:String,required:!0}},components:{MarkNode:ln,Node:an},setup(e){const{onClick:t,onHold:n,display:o}=X(e),s=qe(o),{start:i,stop:r}=qt(t,n);return{start:i,stop:r,comp:s,unref:l,Visibility:xe,isCoercableComponent:ct}}});function Wl(e,t,n,o,s,i){var c;const r=Ve("MarkNode"),a=Ve("Node");return e.unref(e.visibility)!==e.Visibility.None?(f(),y("div",{key:0,style:se({visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0}),class:Q({treeNode:!0,can:e.unref(e.canClick),...e.unref(e.classes)}),onClick:t[0]||(t[0]=(...d)=>e.onClick&&e.onClick(...d)),onMousedown:t[1]||(t[1]=(...d)=>e.start&&e.start(...d)),onMouseleave:t[2]||(t[2]=(...d)=>e.stop&&e.stop(...d)),onMouseup:t[3]||(t[3]=(...d)=>e.stop&&e.stop(...d)),onTouchstartPassive:t[4]||(t[4]=(...d)=>e.start&&e.start(...d)),onTouchendPassive:t[5]||(t[5]=(...d)=>e.stop&&e.stop(...d)),onTouchcancelPassive:t[6]||(t[6]=(...d)=>e.stop&&e.stop(...d))},[u("div",{style:se([{backgroundColor:e.unref(e.color),boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 20px ${e.unref(e.glowColor)}`},(c=e.unref(e.style))!=null?c:[]])},[(f(),O(q(e.unref(e.comp))))],4),p(r,{mark:e.unref(e.mark)},null,8,["mark"]),p(a,{id:e.id},null,8,["id"])],38)):T("",!0)}const ql=E(jl,[["render",Wl],["__scopeId","data-v-52802be1"]]),Kl=Symbol("TreeNode"),Jl=Symbol("Tree");function Yl(e){return Se(()=>{var n;const t=(n=e==null?void 0:e())!=null?n:{};if(t.id=dt("treeNode-"),t.type=Kl,t[_e]=ql,P(t,"visibility"),K(t,"visibility",xe.Visible),P(t,"canClick"),K(t,"canClick",!0),P(t,"color"),P(t,"display"),P(t,"glowColor"),P(t,"classes"),P(t,"style"),P(t,"mark"),t.onClick){const o=t.onClick.bind(t);t.onClick=function(){l(t.canClick)&&o()}}if(t.onHold){const o=t.onHold.bind(t);t.onHold=function(){l(t.canClick)&&o()}}return t[ge]=function(){const{display:o,visibility:s,style:i,classes:r,onClick:a,onHold:c,color:d,glowColor:_,canClick:m,mark:g,id:w}=this;return{display:o,visibility:s,style:i,classes:r,onClick:a,onHold:c,color:d,glowColor:_,canClick:m,mark:g,id:w}},t})}function Zl(e){return Se(()=>{const t=e();return t.id=dt("tree-"),t.type=Jl,t[_e]=Ul,t.isResetting=C(!1),t.resettingNode=ae(null),t.reset=function(n){var s,i;const o=t;o.isResetting.value=!0,o.resettingNode.value=n,(s=o.resetPropagation)==null||s.call(o,o,n),(i=o.onReset)==null||i.call(o,n),o.isResetting.value=!1,o.resettingNode.value=null},t.links=S(()=>{var o;return(o=l(t.branches))!=null?o:[]}),P(t,"visibility"),K(t,"visibility",xe.Visible),P(t,"nodes"),P(t,"leftSideNodes"),P(t,"rightSideNodes"),P(t,"branches"),t[ge]=function(){const{nodes:n,leftSideNodes:o,rightSideNodes:s,branches:i}=this;return{nodes:n,leftSideNodes:o,rightSideNodes:s,branches:i}},t})}const Xl=function(e,t){const n=[t];let o=[t];if(e.branches!=null){const s=l(e.branches);for(;o.length>0;){const i=[];o.forEach(r=>{s.filter(a=>a.startNode===r||a.endNode===r).map(a=>a.startNode===r?a.endNode:a.startNode).filter(a=>!n.includes(a)).forEach(a=>{var c;i.includes(a)||(i.push(a),(c=a.reset)==null||c.reset())})}),o=i,n.push(...o)}}};function Ql(e,t=null,n=0){const o=mt(n);return S(()=>t==null||v.gte(e.value,l(o))?st(e)+" "+e.displayName:`Reach ${v.eq(t.precision,0)?De(l(o)):de(l(o),t.precision)} ${t.displayName} to unlock (You have ${v.eq(t.precision,0)?De(t.value):de(t.value,t.precision)})`)}function ei(e){return Se(()=>{const t=e();return t.currentGain==null&&(t.currentGain=S(()=>{let n=t.gainModifier?t.gainModifier.apply(t.scaling.currentGain(t)):t.scaling.currentGain(t);return n=v.floor(n).max(0),l(t.buyMax)||(n=n.min(1)),n})),t.actualGain==null&&(t.actualGain=t.currentGain),t.currentAt==null&&(t.currentAt=S(()=>{let n=t.scaling.currentAt(t);return t.roundUpCost&&(n=v.ceil(n)),n})),t.nextAt==null&&(t.nextAt=S(()=>{let n=t.scaling.nextAt(t);return t.roundUpCost&&(n=v.ceil(n)),n})),t.convert==null&&(t.convert=function(){var o;const n=l(t.currentGain);t.gainResource.value=v.add(t.gainResource.value,n),t.spend(n),(o=t.onConvert)==null||o.call(t,n)}),t.spend==null&&(t.spend=function(){t.baseResource.value=0}),P(t,"currentGain"),P(t,"actualGain"),P(t,"currentAt"),P(t,"nextAt"),P(t,"buyMax"),K(t,"buyMax",!0),P(t,"roundUpCost"),K(t,"roundUpCost",!0),t})}function ti(e,t){const n=mt(e),o=mt(t);return{currentGain(s){let i=l(s.baseResource.value);if(s.costModifier&&(i=s.costModifier.apply(i)),v.lt(i,l(n)))return 0;const r=v.div(i,l(n)).pow(l(o));return r.isNan()?new v(0):r},currentAt(s){let i=l(s.currentGain);return s.gainModifier&&(i=s.gainModifier.revert(i)),i=v.max(0,i).root(l(o)).times(l(n)),s.costModifier&&(i=s.costModifier.revert(i)),i},nextAt(s){let i=v.add(l(s.currentGain),1).floor();return s.gainModifier&&(i=s.gainModifier.revert(i)),i=v.max(0,i).root(l(o)).times(l(n)).max(l(n)),s.costModifier&&(i=s.costModifier.revert(i)),i}}}function ni(e){return ei(e)}const ft=at({}),Ct=Symbol("Hotkey");function oi(e){return Se(()=>{const t=e();return t.type=Ct,P(t,"enabled"),K(t,"enabled",!0),P(t,"description"),t})}z.on("addLayer",e=>{Ft(e,Ct).forEach(t=>{ft[t.key]=t})});z.on("removeLayer",e=>{Ft(e,Ct).forEach(t=>{ft[t.key]=void 0})});document.onkeydown=function(e){var o;if(((o=e.target)==null?void 0:o.tagName)==="INPUT"||Tt.value&&!b.keepGoing)return;let t=e.key;e.shiftKey&&(t="shift+"+t),e.ctrlKey&&(t="ctrl+"+t);const n=ft[t];n&&l(n.enabled)&&(e.preventDefault(),n.onPress())};mo(W(()=>{const e=Object.values(ft).filter(t=>l(t==null?void 0:t.enabled));return e.length===0?"":p("div",null,[p("br",null,null),p("h4",null,[V("Hotkeys")]),e.map(t=>p("div",null,[t==null?void 0:t.key,V(": "),t==null?void 0:t.description]))])}));const si=Symbol("Reset");function li(e){return Se(()=>{const t=e();return t.id=dt("reset-"),t.type=si,t.reset=function(){var o;const n=s=>{s&&typeof s=="object"&&(He in s?s[He].value=s[ze]:!(s instanceof v)&&!H(s)&&Object.values(s).forEach(i=>n(i)))};l(t.thingsToReset).forEach(n),z.emit("reset",t),(o=t.onReset)==null||o.call(t)},P(t,"thingsToReset"),t})}const Ze={};z.on("removeLayer",e=>{var t;(t=Ze[e.id])==null||t.call(Ze),Ze[e.id]=void 0});const ii=I({__name:"Sticky",setup(e){const t=C("0"),n=new ResizeObserver(s),o=ae(null);function s(){let i=o.value;if(i==null)return;let r=0;for(;i.previousSibling;){const a=i.previousSibling;a.dataset&&"vSticky"in a.dataset&&(r+=a.offsetHeight),i=a}t.value=r+"px"}return ye(s),document.fonts.ready.then(s),rt(()=>{var r;const i=(r=o.value)==null?void 0:r.parentElement;i&&n.observe(i)}),(i,r)=>(f(),y("div",{class:"sticky",style:se({top:t.value}),ref_key:"element",ref:o,"data-v-sticky":""},[me(i.$slots,"default",{},void 0,!0)],4))}});const ai=E(ii,[["__scopeId","data-v-10a04be9"]]),ri=I({__name:"Resource",props:{resource:null,color:null},setup(e){const t=e,n=S(()=>st(t.resource));return(o,s)=>(f(),y("h2",{style:se({color:e.color,"text-shadow":"0px 0px 10px "+e.color})},D(l(n)),5))}}),ui={class:"main-display"},di={key:0},ci={key:1},fi=I({__name:"MainDisplay",props:{resource:null,color:null,classes:null,style:null,effectDisplay:null},setup(e){const n=X(e),o=C(null),s=qe(n.effectDisplay),i=S(()=>v.lt(n.resource.value,"1e1000"));return(r,a)=>(f(),O(ai,null,{default:R(()=>{var c,d;return[u("div",{class:"main-display-container",style:se({height:`${((d=(c=o.value)==null?void 0:c.$el.clientHeight)!=null?d:0)+50}px`})},[u("div",ui,[l(i)?(f(),y("span",di,"You have ")):T("",!0),p(ri,{resource:e.resource,color:e.color||"white"},null,8,["resource","color"]),V(" "+D(e.resource.displayName),1),l(s)?(f(),y("span",ci,[V(", "),(f(),O(q(l(s)),{ref_key:"effectRef",ref:o},null,512))])):T("",!0)])],4)]}),_:1}))}});function pi(e,t){return P(t,"display"),P(t,"classes"),P(t,"style"),P(t,"direction"),K(t,"direction",G.Up),P(t,"xoffset"),P(t,"yoffset"),t.pinnable&&("pinned"in e?(console.error("Cannot add pinnable tooltip to element that already has a property called 'pinned'"),t.pinnable=!1):e.pinned=t.pinned=Ke(!1)),ye(()=>{const n=e[_e];e[_e]=F;const o=e[ge].bind(e);e[ge]=function(){const{display:i,classes:r,style:a,direction:c,xoffset:d,yoffset:_,pinned:m}=this;return{element:{[_e]:n,[ge]:o},display:i,classes:r,style:l(a),direction:c,xoffset:d,yoffset:_,pinned:m}}.bind(t)}),t}const vi=I({props:{display:{type:M(Object,String,Function),required:!0},visibility:{type:M(Number),required:!0},style:M(Object,String,Array),classes:M(Object),onClick:Function,onHold:Function,canClick:{type:M(Boolean),required:!0},small:Boolean,mark:M(Boolean,String),id:{type:String,required:!0}},components:{Node:an,MarkNode:ln},setup(e){const{display:t,onClick:n,onHold:o}=X(e),s=ae("");Ne(()=>{const a=re(t);if(a==null){s.value="";return}if(ct(a)){s.value=J(a);return}const c=J(a.title||"","h3"),d=J(a.description,"div");s.value=J(W(()=>p("span",null,[a.title?p("div",null,[p(c,null,null)]):null,p(d,null,null)])))});const{start:i,stop:r}=qt(n,o);return{start:i,stop:r,comp:s,Visibility:xe,unref:l}}});function mi(e,t,n,o,s,i){var c;const r=Ve("MarkNode"),a=Ve("Node");return e.unref(e.visibility)!==e.Visibility.None?(f(),y("button",{key:0,style:se([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(c=e.unref(e.style))!=null?c:[]]),onClick:t[0]||(t[0]=(...d)=>e.onClick&&e.onClick(...d)),onMousedown:t[1]||(t[1]=(...d)=>e.start&&e.start(...d)),onMouseleave:t[2]||(t[2]=(...d)=>e.stop&&e.stop(...d)),onMouseup:t[3]||(t[3]=(...d)=>e.stop&&e.stop(...d)),onTouchstartPassive:t[4]||(t[4]=(...d)=>e.start&&e.start(...d)),onTouchendPassive:t[5]||(t[5]=(...d)=>e.stop&&e.stop(...d)),onTouchcancelPassive:t[6]||(t[6]=(...d)=>e.stop&&e.stop(...d)),class:Q({feature:!0,clickable:!0,can:e.unref(e.canClick),locked:!e.unref(e.canClick),small:e.small,...e.unref(e.classes)})},[e.unref(e.comp)?(f(),O(q(e.unref(e.comp)),{key:0})):T("",!0),p(r,{mark:e.unref(e.mark)},null,8,["mark"]),p(a,{id:e.id},null,8,["id"])],38)):T("",!0)}const _i=E(vi,[["render",mi],["__scopeId","data-v-3e2f78a1"]]),gi=Symbol("Clickable");function yi(e){return Se(()=>{var n;const t=(n=e==null?void 0:e())!=null?n:{};if(t.id=dt("clickable-"),t.type=gi,t[_e]=_i,P(t,"visibility"),K(t,"visibility",xe.Visible),P(t,"canClick"),K(t,"canClick",!0),P(t,"classes"),P(t,"style"),P(t,"mark"),P(t,"display"),t.onClick){const o=t.onClick.bind(t);t.onClick=function(s){l(t.canClick)&&o(s)}}if(t.onHold){const o=t.onHold.bind(t);t.onHold=function(){l(t.canClick)&&o()}}return t[ge]=function(){const{display:o,visibility:s,style:i,classes:r,onClick:a,onHold:c,canClick:d,small:_,mark:m,id:g}=this;return{display:o,visibility:s,style:l(i),classes:r,onClick:a,onHold:c,canClick:d,small:_,mark:m,id:g}},t})}function hi(e){return yi(()=>{const t=e();P(t,"showNextAt"),K(t,"showNextAt",!0),K(t,"minimumGain",1),t.resetDescription==null?t.resetDescription=S(()=>v.lt(t.conversion.gainResource.value,1e3)?"Reset for ":""):P(t,"resetDescription"),t.display==null&&(t.display=W(()=>p("span",null,[l(t.resetDescription),p("b",null,[st(t.conversion.gainResource,v.max(l(t.conversion.actualGain),l(t.minimumGain)))])," ",t.conversion.gainResource.displayName,l(t.showNextAt)?p("div",null,[p("br",null,null),l(t.conversion.buyMax)?"Next:":"Req:"," ",st(t.conversion.baseResource,l(t.conversion.buyMax)||v.floor(l(t.conversion.actualGain)).neq(1)?l(t.conversion.nextAt):l(t.conversion.currentAt))," ",t.conversion.baseResource.displayName]):null]))),t.canClick==null&&(t.canClick=S(()=>v.gte(l(t.conversion.actualGain),l(t.minimumGain))));const n=t.onClick;return t.onClick=function(){!l(t.canClick)||(t.conversion.convert(),t.tree.reset(t.treeNode),t.resetTime&&(t.resetTime.value=t.resetTime[ze]),n==null||n())},t})}function bi(e){return Yl(()=>{const t=e();return P(t,"display"),K(t,"display",t.layerID),P(t,"append"),{...t,display:t.display,onClick:l(t.append)?function(){if(b.tabs.includes(t.layerID)){const n=b.tabs.lastIndexOf(t.layerID);b.tabs.splice(n,1)}else b.tabs.push(t.layerID)}:function(){b.tabs.splice(1,1,t.layerID)}}})}const Vt="p",lt=$t(Vt,function(){const e="Prestige",t="#4BDC13",n=sn(0,"prestige points"),o=ni(()=>({scaling:ti(10,.5),baseResource:it.points,gainResource:n,roundUpCost:!0})),s=li(()=>({thingsToReset:()=>[lt]})),i=bi(()=>({layerID:Vt,color:t,reset:s}));pi(i,{display:Ql(n),pinnable:!0});const r=hi(()=>({conversion:o,tree:it.tree,treeNode:i})),a=oi(()=>({description:"Reset for prestige points",key:"p",onPress:r.onClick}));return{name:e,color:t,points:n,display:W(()=>p(Y,null,[p(fi,{resource:n,color:t},null),We(r)])),treeNode:i,hotkey:a}}),it=$t("main",function(){const e=sn(10),t=Pl(e),n=Rl(e),o=S(()=>new v(1));z.on("update",r=>{e.value=v.add(e.value,v.times(o.value,r))});const s=Vl(e,o),i=Zl(()=>({nodes:[[lt.treeNode]],branches:[],onReset(){e.value=Rt(this.resettingNode.value)===Rt(lt.treeNode)?0:10,t.value=e.value,n.value=e.value},resetPropagation:Xl}));return{name:"Tree",links:i.links,display:W(()=>p(Y,null,[b.devSpeed===0?p("div",null,[V("Game Paused")]):null,b.devSpeed&&b.devSpeed!==1?p("div",null,[V("Dev Speed: "),de(b.devSpeed),V("x")]):null,b.offlineTime?p("div",null,[V("Offline Time: "),ut(b.offlineTime)]):null,p("div",null,[v.lt(e.value,"1e1000")?p("span",null,[V("You have ")]):null,p("h2",null,[de(e.value)]),v.lt(e.value,"1e1e6")?p("span",null,[V(" points")]):null]),v.gt(o.value,0)?p("div",null,[V("("),s.value,V(")")]):null,p(Tl,null,null),We(i)])),points:e,best:t,total:n,oomps:s,tree:i}}),ki=e=>[it,lt],Tt=S(()=>!1);function wi(e,t){}const rn=Object.freeze(Object.defineProperty({__proto__:null,main:it,getInitialLayers:ki,hasWon:Tt,fixOldSave:wi},Symbol.toStringTag,{value:"Module"})),Je=e=>(he("data-v-89b032d9"),e=e(),be(),e),Ni={class:"game-over-modal-header"},$i=["src","alt"],Si={class:"game-over-modal-title"},Ci=Je(()=>u("h2",null,"Congratulations!",-1)),Ti={key:0},Pi=Je(()=>u("br",null,null,-1)),Ri=Je(()=>u("div",null," Please check the Discord to discuss the game or to check for new content updates! ",-1)),Oi=Je(()=>u("br",null,null,-1)),Ii=["href"],Vi=Je(()=>u("span",{class:"material-icons game-over-modal-discord"},"discord",-1)),Di=I({__name:"GameOverScreen",setup(e){const{title:t,logo:n,discordName:o,discordLink:s,versionNumber:i,versionTitle:r}=x,a=S(()=>ut(b.timePlayed)),c=S(()=>Tt.value&&!b.keepGoing),d=ue(b,"autosave");function _(){b.keepGoing=!0}function m(){we(Oe())}return(g,w)=>(f(),O(Ce,{"model-value":l(c)},{header:R(()=>[u("div",Ni,[l(n)?(f(),y("img",{key:0,class:"game-over-modal-logo",src:l(n),alt:l(t)},null,8,$i)):T("",!0),u("div",Si,[Ci,u("h4",null,"You've beaten "+D(l(t))+" v"+D(l(i))+": "+D(l(r)),1)])])]),body:R(({shown:$})=>[$?(f(),y("div",Ti,[u("div",null,"It took you "+D(l(a))+" to beat the game.",1),Pi,Ri,Oi,u("div",null,[u("a",{href:l(s),class:"game-over-modal-discord-link"},[Vi,V(" "+D(l(o)),1)],8,Ii)]),p(pe,{title:"Autosave",modelValue:l(d),"onUpdate:modelValue":w[0]||(w[0]=h=>H(d)?d.value=h:null)},null,8,["modelValue"])])):T("",!0)]),footer:R(()=>[u("div",{class:"game-over-footer"},[u("button",{onClick:_,class:"button"},"Keep Going"),u("button",{onClick:m,class:"button danger"},"Play Again")])]),_:1},8,["model-value"]))}});const xi=E(Di,[["__scopeId","data-v-89b032d9"]]),pt=e=>(he("data-v-e211abff"),e=e(),be(),e),Mi=pt(()=>u("div",{class:"nan-modal-header"},[u("h2",null,"NaN value detected!")],-1)),Li={key:0},Bi=pt(()=>u("br",null,null,-1)),Ei=["href"],Ui=pt(()=>u("span",{class:"material-icons nan-modal-discord"},"discord",-1)),Ai=pt(()=>u("br",null,null,-1)),Fi={class:"nan-footer"},Gi=I({__name:"NaNScreen",setup(e){const{discordName:t,discordLink:n}=x,o=ue(b,"autosave"),s=ue(B,"hasNaN"),i=C(null),r=S(()=>{var w;return(w=B.NaNPath)==null?void 0:w.join(".")}),a=S(()=>{var w;return(w=B.NaNPath)==null?void 0:w.slice(-1)[0]}),c=S(()=>B.NaNReceiver&&a.value?B.NaNReceiver[a.value]:null),d=S({get(){return b.devSpeed===0},set(w){b.devSpeed=w?null:0}});function _(){B.NaNReceiver&&a.value&&(B.NaNReceiver[a.value]=new v(0),B.hasNaN=!1)}function m(){B.NaNReceiver&&a.value&&(B.NaNReceiver[a.value]=new v(1),B.hasNaN=!1)}function g(){B.NaNReceiver&&a.value&&(B.NaNReceiver[a.value]=new v(NaN),B.hasNaN=!1)}return(w,$)=>(f(),y(Y,null,[p(Ce,$e({modelValue:l(s),"onUpdate:modelValue":$[4]||($[4]=h=>H(s)?s.value=h:null)},w.$attrs),{header:R(()=>[Mi]),body:R(()=>[u("div",null,[V(' Attempted to assign "'+D(l(r))+'" to NaN',1),l(c)?(f(),y("span",Li,D(" ")+"(previously "+D(l(de)(l(c)))+")",1)):T("",!0),V(". Auto-saving has been "+D(l(o)?"enabled":"disabled")+". Check the console for more details, and consider sharing it with the developers on discord. ",1)]),Bi,u("div",null,[u("a",{href:l(n),class:"nan-modal-discord-link"},[Ui,V(" "+D(l(t)),1)],8,Ei)]),Ai,p(pe,{title:"Autosave",modelValue:l(o),"onUpdate:modelValue":$[0]||($[0]=h=>H(o)?o.value=h:null)},null,8,["modelValue"]),l(x).enablePausing?(f(),O(pe,{key:0,title:"Pause game",modelValue:l(d),"onUpdate:modelValue":$[1]||($[1]=h=>H(d)?d.value=h:null)},null,8,["modelValue"])):T("",!0)]),footer:R(()=>[u("div",Fi,[u("button",{onClick:$[2]||($[2]=h=>{var U;return(U=i.value)==null?void 0:U.open()}),class:"button"},"Open Saves Manager"),u("button",{onClick:_,class:"button"},"Set to 0"),u("button",{onClick:m,class:"button"},"Set to 1"),l(c)&&l(v).neq(l(c),0)&&l(v).neq(l(c),1)?(f(),y("button",{key:0,onClick:$[3]||($[3]=h=>s.value=!1),class:"button"}," Set to previous ")):T("",!0),u("button",{onClick:g,class:"button danger"},"Ignore")])]),_:1},16,["modelValue"]),p(nn,{ref_key:"savesManager",ref:i},null,512)],64))}});const Hi=E(Gi,[["__scopeId","data-v-e211abff"]]),zi={key:0,class:"tpsDisplay"},ji={key:0,class:"low"},Wi=I({__name:"TPS",setup(e){const t=S(()=>v.div(B.lastTenTicks.length,B.lastTenTicks.reduce((i,r)=>i+r,0))),n=C([]);Ne(()=>{n.value.push(Math.round(t.value.toNumber())),n.value.length>10&&(n.value=n.value.slice(1))});const o=S(()=>n.value.reduce((i,r)=>v.max(i,r),0)),s=S(()=>v.sub(t.value,o.value).gt(1));return(i,r)=>l(t).isNan()?T("",!0):(f(),y("div",zi,[V(" TPS: "+D(l(De)(l(t)))+" ",1),p(gt,{name:"fade"},{default:R(()=>[l(s)?(f(),y("span",ji,D(l(De)(l(o))),1)):T("",!0)]),_:1})]))}});const qi=E(Wi,[["__scopeId","data-v-9e21302c"]]);const Ki=I({__name:"App",setup(e){const t=x.useHeader,n=S(()=>ht[j.theme].variables),o=ue(j,"showTPS"),s=S(()=>J(W(()=>p(Y,null,[_o.map(We)]))));return(i,r)=>(f(),y(Y,null,[u("div",{id:"modal-root",style:se(l(n))},null,4),u("div",{class:Q(["app",{useHeader:l(t)}]),style:se(l(n))},[l(t)?(f(),O(on,{key:0})):T("",!0),p(Cl),l(l(o))?(f(),O(qi,{key:1})):T("",!0),p(xi),p(Hi),(f(),O(q(l(s))))],6)],64))}});const Ji=E(Ki,[["__scopeId","data-v-70a7e642"]]);z.on("setupVue",e=>e.use(bn));function Yi(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:o,onRegistered:s,onRegisteredSW:i,onRegisterError:r}=e;let a,c,d,_;const m=async(w=!0)=>{await d,w&&(a==null||a.addEventListener("controlling",$=>{$.isUpdate&&window.location.reload()})),await(_==null?void 0:_())};async function g(){if("serviceWorker"in navigator){const{Workbox:w,messageSW:$}=await Ae(()=>import("./workbox-window.4a8794bb.js"),[],import.meta.url);_=async()=>{c&&c.waiting&&await $(c.waiting,{type:"SKIP_WAITING"})},a=new w("./sw.js",{scope:"./",type:"classic"}),a.addEventListener("activated",h=>{h.isUpdate||o==null||o()});{const h=()=>{n==null||n()};a.addEventListener("waiting",h),a.addEventListener("externalwaiting",h)}a.register({immediate:t}).then(h=>{c=h,i?i("./sw.js",h):s==null||s(h)}).catch(h=>{r==null||r(h)})}}return d=g(),m}function Zi(e={}){const{immediate:t=!0,onNeedRefresh:n,onOfflineReady:o,onRegistered:s,onRegisteredSW:i,onRegisterError:r}=e,a=C(!1),c=C(!1);return{updateServiceWorker:Yi({immediate:t,onNeedRefresh(){a.value=!0,n==null||n()},onOfflineReady(){c.value=!0,o==null||o()},onRegistered:s,onRegisteredSW:i,onRegisterError:r}),offlineReady:c,needRefresh:a}}document.title=x.title;window.projInfo=x;if(x.id==="")throw"Project ID is empty! Please select a unique ID for this project in /src/data/projInfo.json";requestAnimationFrame(async()=>{console.log(`%cMade in Profectus%c
Learn more at www.moddingtree.com`,"font-weight: bold; font-size: 24px; color: #A3BE8C; background: #2E3440; padding: 4px 8px; border-radius: 8px;","padding: 4px;"),await co();const{globalBus:e,startGameLoop:t}=await Ae(()=>Promise.resolve().then(()=>uo),void 0,import.meta.url),n=window.vue=mn(Ji);e.emit("setupVue",n),n.mount("#app"),ye(()=>{const o=kn(),{updateServiceWorker:s}=Zi({onNeedRefresh(){o.info("New content available, click or reload to update.",{timeout:!1,closeOnClick:!1,draggable:!1,icon:{iconClass:"material-icons",iconChildren:"refresh",iconTag:"i"},rtl:!1,onClick(){s()}})},onOfflineReady(){o.info("App ready to work offline")},onRegisterError:console.warn,onRegistered(i){i&&setInterval(i.update,60*60*1e3)}})}),t()});
